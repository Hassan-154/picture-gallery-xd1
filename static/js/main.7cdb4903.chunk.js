(this["webpackJsonppost-fire"]=this["webpackJsonppost-fire"]||[]).push([[0],{23:function(e,t,c){},24:function(e,t,c){},27:function(e,t,c){},28:function(e,t,c){},30:function(e,t,c){"use strict";c.r(t);var a=c(4),n=c.n(a),r=c(16),s=c.n(r),i=(c(23),c(24),c(14)),o=c(9),u=c(10);c(31),c(32);u.a.initializeApp({apiKey:"AIzaSyDRqBTEE1U0K4kMVKsvRyrg-AZ4la0j79o",authDomain:"picture-gallery-xd1.firebaseapp.com",projectId:"picture-gallery-xd1",storageBucket:"picture-gallery-xd1.appspot.com",messagingSenderId:"211808647290",appId:"1:211808647290:web:5bf6fa443c756fb79ca3c3"});var l=u.a.storage(),j=u.a.firestore(),d=u.a.firestore.FieldValue.serverTimestamp;var f=function(e){var t=Object(a.useState)([]),c=Object(o.a)(t,2),n=c[0],r=c[1];return Object(a.useEffect)((function(){var t=j.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id}))})),r(t)}));return function(){return t()}}),[e]),{docs:n}},b=c(2),p=function(){var e=f("images").docs;return console.log(e),Object(b.jsx)("div",{className:"img-grid",children:e&&e.map((function(e){return Object(b.jsx)("div",{className:"img-warp",children:Object(b.jsx)("img",{src:e.url,alt:"uplaoded pic"})},e.id)}))})};c(27);var O=function(){return Object(b.jsxs)("div",{className:"title",children:[Object(b.jsx)("h2",{children:"FireGram"}),Object(b.jsx)("h1",{children:"Your Picture"}),Object(b.jsx)("p",{children:"\u201cA picture held us captive. And we could not get outside it, for it lay in our language and language seemed to repeat it to us inexorably.\u201d"})]})},g=(c(28),c(13)),m=c.n(g),v=c(18);var h=function(e){var t=Object(a.useState)(0),c=Object(o.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(0),i=Object(o.a)(s,2),u=i[0],f=i[1],b=Object(a.useState)(0),p=Object(o.a)(b,2),O=p[0],g=p[1];return Object(a.useEffect)((function(){var t=l.ref(e.name),c=j.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;r(t)}),(function(e){f(e)}),Object(v.a)(m.a.mark((function e(){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:a=e.sent,n=d(),c.add({url:a,createdAt:n}),g(a);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:n,url:O,error:u}};var x=function(e){var t=e.file,c=e.setFile,n=h(t),r=n.url,s=n.progress;return Object(a.useEffect)((function(){r&&c(null)}),[r,c]),Object(b.jsx)("div",{className:"progress__bar",style:{width:s+"%"}})};var y=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(o.a)(r,2),i=s[0],u=s[1];return Object(b.jsxs)("form",{children:[Object(b.jsxs)("label",{className:"file-box",children:[Object(b.jsx)("input",{className:"file",type:"file",onChange:function(e){var t=e.target.files[0];t?(n(t),u("")):(n(null),u("please select an image file (png or jpg)"))}}),Object(b.jsx)("span",{className:"span",children:"+"})]}),Object(b.jsxs)("div",{className:"output",children:[i&&Object(b.jsx)("div",{className:"error",children:i}),c&&Object(b.jsx)("div",{className:"file__name",children:c.name}),c&&Object(b.jsx)(x,{file:c,setFile:n})]})]})};var N=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(O,{}),Object(b.jsx)(y,{}),Object(b.jsx)(p,{})]})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,34)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.getElementById("root")),S()}},[[30,1,2]]]);
//# sourceMappingURL=main.7cdb4903.chunk.js.map